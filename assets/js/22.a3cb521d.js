(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{468:function(t,e,n){"use strict";n.r(e);var a=n(9),s=Object(a.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"flask"}},[t._v("Flask")]),t._v(" "),n("h2",{attrs:{id:"简介"}},[t._v("简介")]),t._v(" "),n("p",[t._v("基于Python网络框架开发的常用知识,及目前的4种主流Python网络框架：Django（最早、最完备）、Tornado（2009年，支持异步高并发）、Flask（2010年，着眼于小项目）、Twisted。")]),t._v(" "),n("h2",{attrs:{id:"依赖"}},[t._v("依赖")]),t._v(" "),n("ul",[n("li",[n("p",[n("code",[t._v("Werkzeug")]),t._v("实现WSGI，这是应用程序和服务器之间的标准Python接口。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("Jinja")]),t._v("是一种模板语言，可呈现您的应用程序服务的页面。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("MarkupSafe")]),t._v("随"),n("code",[t._v("Jinja")]),t._v("一起提供。渲染模板时，它会逃脱不受信任的输入，以避免注入攻击。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("ItsDangerous")]),t._v("安全签名数据以确保其完整性。这用于保护Flask的会话cookie。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("Click")]),t._v("是用于编写命令行应用程序的框架。它提供flask命令，并允许添加自定义管理命令。")])])]),t._v(" "),n("h2",{attrs:{id:"python-pip3编译安装"}},[t._v("python pip3编译安装")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("安装模块\nwget --no-check-certificate  https://pypi.python.org/packages/source/s/setuptools/setuptools-19.6.tar.gz#md5=c607dd118eae682c44ed146367a17e26\n\ntar -zxvf setuptools-19.6.tar.gz\n\ncd setuptools-19.6.tar.gz\n\npython3 setup.py build\n\npython3 setup.py install\n\n正式安装\nwget --no-check-certificate  https://pypi.python.org/packages/source/p/pip/pip-8.0.2.tar.gz#md5=3a73c4188f8dbad6a1e6f6d44d117eeb\n\ntar -zxvf pip-8.0.2.tar.gz\n\ncd pip-8.0.2\n\npython3 setup.py build\n\npython3 setup.py install\n")])])]),n("h2",{attrs:{id:"构建开发环境"}},[t._v("构建开发环境")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cd pythonWeb\nsudo apt-get install python3-venv\npython3 -m venv venv\n进入虚拟环境\n. venv/bin/activate\npip3 install Flask\n")])])]),n("h2",{attrs:{id:"快速入门"}},[t._v("快速入门")]),t._v(" "),n("p",[t._v("一个最小的Flask应用程序看起来像这样：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("from flask import Flask\napp = Flask(__name__)\n\n@app.route('/')\ndef hello_world():\n    return 'Hello, World!'\n")])])]),n("p",[t._v("要运行该应用程序，您可以使用flask命令或-m将Flask与python 一起使用。在执行此操作之前，您需要通过导出FLASK_APP环境变量来告诉终端应用程序可以使用 ：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("$ export FLASK_APP=hello.py\n$ flask run\n * Running on http://127.0.0.1:5000/\n外部访问\n$ flask run --host=0.0.0.0\n * Running on http://0.0.0.0:5000/\n")])])]),n("h2",{attrs:{id:"flask之g对象"}},[t._v("flask之g对象")]),t._v(" "),n("p",[t._v("1.什么是g对象。\n1.在flask中，有一个专门用来存储用户信息的g对象，g的全称的为global。\n2.g对象在一次请求中的所有的代码的地方，都是可以使用的。")]),t._v(" "),n("p",[t._v("2.g对象和session的区别\n在我看来，最大的区别是，session对象是可以跨request的，只要session还未失效，不同的request的请求会获取到同一个session，但是g对象不是，g对象不需要管过期时间，请求一次就g对象就改变了一次，或者重新赋值了一次。那么g对象该如何使用呢？看代码。")]),t._v(" "),n("p",[t._v("作者：仙剑奇灵\n链接：https://www.jianshu.com/p/d4385c637d95\n来源：简书\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。")]),t._v(" "),n("h2",{attrs:{id:"唯一url-重定向行为"}},[t._v("唯一URL /重定向行为")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("@app.route('/projects/')\ndef projects():\n    return 'The project page'\n\n@app.route('/about')\ndef about():\n    return 'The about page'\n")])])]),n("p",[t._v("projects端点的规范URL 带有斜杠。它类似于文件系统中的文件夹。如果您访问的URL不带斜杠，Flask会将您重定向到带斜杠的规范URL。")]),t._v(" "),n("p",[t._v("about端点的规范URL 不带斜杠。它类似于文件的路径名。使用斜杠访问URL会产生404“未找到”错误。这有助于使这些资源的URL保持唯一，从而有助于搜索引擎避免对同一页面进行两次索引。")]),t._v(" "),n("h2",{attrs:{id:"url-for"}},[t._v("url_for")]),t._v(" "),n("p",[t._v("url_for操作对象是函数，而不是route里的路径。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("from flask import Flask,url_for\nfrom markupsafe import escape\n\n\napp = Flask(__name__)\nprint (__name__)\n\n\n@app.route('/')\ndef index():\n    return 'Index Page'\n\n@app.route('/hello')\ndef hello():\n    return 'Hello, World'\n\n@app.route('/user/<username>')\ndef show_user_profile(username):\n    # show the user profile for that user\n    return 'Hellow User %s' % escape(username)\n\n@app.route('/post/<int:post_id>')\ndef show_post(post_id):\n    # show the post with the given id, the id is an integer\n    return 'Post %d' % post_id\n\n@app.route('/path/<path:subpath>')\ndef show_subpath(subpath):\n    # show the subpath after /path/\n    return 'Subpath %s' % escape(subpath)\n\n\n@app.route('/projects/')\ndef projects():\n    return 'The project page'\n\n@app.route('/about')\ndef about():\n    return 'The about page'\n\nwith app.test_request_context():\n    print(url_for('index'))\n    print(url_for('hello'))\n    print(url_for('show_post', post_id='123'))\n    print(url_for('show_user_profile', username='John Doe'))\n")])])]),n("p",[t._v("运行结果：")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("hellow\n/\n/hello\n/post/123\n/user/John%20Doe\n")])])]),n("h2",{attrs:{id:"http方法"}},[t._v("HTTP方法")]),t._v(" "),n("p",[t._v("默认情况下，Flask路由仅响应GET请求。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("from flask import request\n\n@app.route('/login', methods=['GET', 'POST'])\ndef login():\n    if request.method == 'POST':\n        return do_the_login()\n    else:\n        return show_the_login_form()\n")])])]),n("h2",{attrs:{id:"错误页面编辑"}},[t._v("错误页面编辑")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("@app.errorhandler(404)\ndef page_not_found(error):\n    return 'This page does not exist', 404\n")])])])])}),[],!1,null,null,null);e.default=s.exports}}]);